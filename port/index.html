 <!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bootstrap.css" />
    <!-- endbower -->
    <!-- endbuild -->
    
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="styles/sb-admin-2.css">
    <link rel="stylesheet" href="styles/timeline.css">
    <link rel="stylesheet" href="bower_components/metisMenu/dist/metisMenu.min.css">
    <link rel="stylesheet" href="bower_components/angular-loading-bar/build/loading-bar.min.css">
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css" type="text/css">
    <!-- endbuild -->
    
    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/angular/angular.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/angular-ui-router/release/angular-ui-router.min.js"></script>
    <script src="bower_components/json3/lib/json3.min.js"></script>
    <script src="bower_components/oclazyload/dist/ocLazyLoad.min.js"></script>
    <script src="bower_components/angular-loading-bar/build/loading-bar.min.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
    <script src="bower_components/metisMenu/dist/metisMenu.min.js"></script>
    <script src="bower_components/Chart.js/Chart.min.js"></script>
    <script type="text/javascript" src="bower_components/angular-weather/src/angular-weather.js"></script>
    <script src= "https://cdn.zingchart.com/zingchart.min.js"></script>
    <script> zingchart.MODULESDIR = "https://cdn.zingchart.com/modules/";  
             ZC.LICENSE = ["569d52cefae586f634c54f86dc99e6a9","ee6b7db5b51705a13dc2339db3edaf6d"];</script>
    <script src="bower_components/justgage/justgage.js"></script>


    <!-- gauge -->

  <script src="http://code.highcharts.com/highcharts.js"></script>
  <script src="http://code.highcharts.com/highcharts-more.js"></script>
  <script src="http://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>



    <!-- endbower -->
    <!-- endbuild -->
    
    <!-- build:js({.tmp,app}) scripts/scripts.js -->
        <script src="app.js"></script>
        <script src="js/sb-admin-2.js"></script>
    <!-- endbuild -->



    <!-- Custom CSS -->

    <!-- Custom Fonts -->

    <!-- Morris Charts CSS -->
    <!-- <link href="styles/morrisjs/morris.css" rel="stylesheet"> -->

      <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>




    </head>
   
    <body>

   <font face="Georgia"> <div class = "outside">
<div class="row">
    <div class="col-lg-12">
        <h1 id="title">Solar Energy Dashboard</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>
<div class="row">
    <div class="col-lg-4 col-sm-12" id="line-chart" ng-controller="ChartCtrl">
        <div class="panel panel-default">
            <div class="panel-heading">Building Solar Energy %</div>
            <div class="panel-body">
               <div   id="container-speed" style="min-width: 310px; max-width: 400px; height: 27vh; margin: 0 auto"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-4 col-sm-12" id="bar-chart" ng-controller="ChartCtrl">
        <div class="panel panel-default">
            <div class="panel-heading" id="demo">Energy Analogy</div>
            <div class="panel-body">
                 <div class = "fixedT">
                  <center><img src="img/idea.png" height="150px" >
                  <h3 id="enAnalogy"> You could power 10 lightbulbs for a day with the energy produced by these solar panels </h3></center>
            </div>
            </div>
        </div>
    </div>
        <div class="col-lg-4 col-sm-12" id="doughnut-chart" ng-controller="ChartCtrl">
        <div class="panel panel-default">
            <div class="panel-heading">Dollars Saved</div>
            <div class="panel-body">
            <div class = "fixedT">
               <center><img src="img/banknote.png" height="150px" >
                <h3 id="cost"> $10,000 of energy was produced in the last month </h3></center>
            </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-8 col-sm-12" id="radar-chart" ng-controller="ChartCtrl">
        <div class="panel panel-default">
            <div class="panel-heading">Energy Chart</div>
            <div class="panel-body">
            <div id="chart_div"></div>

            </div>
        </div>
    </div>
    <div class="col-lg-4 col-sm-12" id="pie-chart" ng-controller="ChartCtrl">
        <div class="panel panel-default">
          <div class="panel-heading">Weather</div>
          <div class="panel-body">
             <div class = "fixed">      

            </div>
          </div>
        </div>
    </div>
                <div class="component__weather-box">
  <div class="component__weather-content">
    <div class="weather-content__overview"></div>
    <div class="weather-content__temp"></div>
    </div>
</div>
</div>
</font>




<button onclick="weekChanger()">change to week data</button>
<button onclick="yearChanger()">change to year data</button>
<button onclick="monthChanger()">change to year data</button>




<script>

var gaugeOptions = {

    chart: {
        type: 'solidgauge'
    },

    title: null,

    pane: {
        center: ['50%', '90%'],
        size: '180%',
        startAngle: -90,
        endAngle: 90,
        background: {
            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
            innerRadius: '60%',
            outerRadius: '100%',
            shape: 'arc'
        }
    },

    tooltip: {
 valueSuffix: '% energy'
        },

    // the value axis
    yAxis: {
        stops: [
            [0.1, '#DF5353'], // red
            [0.5, '#DDDF0D'], // yellow
            [0.9, '#55BF3B'] // greem
        ],
        lineWidth: 0,
        minorTickInterval: null,
        tickAmount: 2,
        title: {
            y: -70
        },
        labels: {
            y: 16
        }
    },

    plotOptions: {
        solidgauge: {
            dataLabels: {
                y: 5,
                borderWidth: 0,
                useHTML: true
            }
        }
    }
};

// The speed gauge
var chartSpeed = Highcharts.chart('container-speed', Highcharts.merge(gaugeOptions, {
    yAxis: {
        min: 0,
        max: 20,
        title: {
            text: ''
        }
    },

    credits: {
        enabled: false
    },

    series: [{
        name: 'percentage',
        data: [18],
        dataLabels: {
            format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                   '<span style="font-size:12px;color:silver">% energy</span></div>'
        },
        tooltip: {
            valueSuffix: '% energy'
        }
    }]

}));
google.charts.load('current', {packages: ['corechart', 'bar']});
google.charts.setOnLoadCallback(drawBasic);

function drawBasic() {

      var data = new google.visualization.arrayToDataTable(
        [
         ['', 'Value'],
         ['Jan', 8.94],            // RGB value
         ['Feb', 10.49],            // English color name
         ['March', 19.30],
         ['April', 19.30],
         ['May', 19.30],
         ['June', 19.30],
         ['July', 19.30],
         ['Aug', 19.30],
         ['Sep', 19.30],
         ['Oct', 19.30],
         ['Nov', 19.30],
         ['Dec', 19.30],
      ]


      );

      var options = {
        legend: { position: "none" },
        hAxis : {textColor: '#ffffff'}
       };

      var chart = new google.charts.Bar(
        document.getElementById('chart_div'));

      chart.draw(data, options);
    }

    window.feed = function(callback) {
        var tick = {};
        tick.plot0 = Math.ceil(10 + (Math.random() * 9));
        callback(JSON.stringify(tick));
    };
 
    var g = new JustGage({
        id: "gauge",
        value: 40,
        min: 0,
        max: 100,
        title: "% of Building Energy",
        gaugeWidthScale: 1.2,
        titleFontFamily: "Georgia",
        valueFontFamily: "Georgia"
    });

    var yearChart ={
        // division id in html above where the graph will reside
        element: 'myfirstchart',
        //array of the month and energy value
        data: [
          { month: 'Jan', value: 129 },
          { month: 'Feb', value: 230 },
          { month: 'Mar', value: 255 },
          { month: 'Apr', value: 340 },
          { month: 'May', value: 33 },
          { month: 'Jun', value: 316 },
          { month: 'Jul', value: 39 },
          { month: 'Aug', value: 38 },
          { month: 'Sep', value: 35 },
          { month: 'Oct', value: 30 },
          { month: 'Nov', value: 24 },
          { month: 'Dec', value: 20 },
        ],
        // The name of the data record attribute that contains x-values.
        xkey: 'month',
        // A list of names of data record attributes that contain y-values.
        ykeys: ['value'],
        // Labels for the ykeys -- will be displayed when you hover over the chart
        labels: ['Value'], 
    };

    var weekChart ={
        element: 'myfirstchart',
        data: [
          { day: 'Sunday', value: 129 },
          { day: 'Monday', value: 230 },
          { day: 'Tuesday', value: 255 },
          { day: 'Wednesday', value: 340 },
          { day: 'Thursday', value: 33 },
          { day: 'Friday', value: 316 },
          { day: 'Saturday', value: 39 },
        ],
        xkey: 'day',
        ykeys: ['value'],
        labels: ['Value'], 
    };

    var monthChart ={
        element: 'myfirstchart',
        data: [
          { day: '1', value: 129 },
          { day: '2', value: 129 },
          { day: '3', value: 129 },
            { day: '4', value: 129 },
          { day: '5', value: 129 },
          { day: '6', value: 129 },
          { day: '7', value: 129 },
          { day: '8', value: 129 },
          { day: '9', value: 129 },
          { day: '10', value: 129 },
          { day: '11', value: 129 },
          { day: '12', value: 129 },
          { day: '13', value: 129 },
          { day: '14', value: 129 },
          { day: '15', value: 129 },
          { day: '16', value: 129 },
          { day: '17', value: 129 },
          { day: '18', value: 129 },
          { day: '19', value: 129 },
          { day: '20', value: 129 },
          { day: '21', value: 129 },
          { day: '22', value: 129 },
          { day: '23', value: 129 },
          { day: '24', value: 129 },
          { day: '25', value: 129 },
          { day: '26', value: 129 },
          { day: '27', value: 129 },
          { day: '28', value: 129 },
          { day: '29', value: 129 },
          { day: '30', value: 129 },
          { day: '31', value: 129 },
        ],
        xkey: 'day',
        ykeys: ['value'],
        labels: ['Value'], 
    };

   new Morris.Bar(yearChart); 

    function weekChanger(){
        var ourRequest = new XMLHttpRequest();
        ourRequest.open('GET', 'https://api.myjson.com/bins/tm4ub');
        ourRequest.onload = function() {
            var ourData = JSON.parse(ourRequest.responseText);
            console.log(ourData);
            renderHTML(ourData);
        };
        ourRequest.send();
        function renderHTML(data) {
            if(data.values.length == 7)
                drawWeekChart(data);
            else if (data.values.length == 12)
                drawYearChart(data);
        }
     }

     function yearChanger(){
        var ourRequest = new XMLHttpRequest();
        ourRequest.open('GET', 'https://api.myjson.com/bins/pxobn');
        ourRequest.onload = function() {
            var ourData = JSON.parse(ourRequest.responseText);
            console.log(ourData);
            renderHTML(ourData);
        };
        ourRequest.send();
        function renderHTML(data) {
            if(data.values.length == 7)
                drawWeekChart(data);
            else if (data.values.length == 12)
                drawYearChart(data);
        }
     }

     function monthChanger(){
        var ourRequest = new XMLHttpRequest();
        ourRequest.open('GET', 'https://api.myjson.com/bins/7no1v');
        ourRequest.onload = function() {
            var ourData = JSON.parse(ourRequest.responseText);
            console.log(ourData);
            renderHTML(ourData);
        };
        ourRequest.send();
        function renderHTML(data) {
            if(data.values.length == 7)
                drawWeekChart(data);
            else if (data.values.length == 12)
                drawYearChart(data);
            else if (data.values.length == 31)
                drawMonthChart(data);
        }
     }  

     function drawWeekChart(incomingData){
        for(i = 0; i < 7; i++)
            weekChart.data[i].value = incomingData.values[i];
        $('#myfirstchart').empty();
        new Morris.Bar(weekChart); 

        $('#gauge').empty();
            var g = new JustGage({
            id: "gauge",
            value: incomingData.percentage,
            min: 0,
            max: 100,
            title: "% of Building Energy",
            gaugeWidthScale: 1.2,
            titleFontFamily: "Georgia",
            valueFontFamily: "Georgia"
        });

        document.getElementById("enAnalogy").innerHTML = "You could power " + incomingData.energyAnalogyValue + " lightbulbs for a day with the energy produced by these solar panels in a week";

        document.getElementById("cost").innerHTML = "$" + incomingData.moneySaved + " of energy was produced in the last week";
     }

     function drawMonthChart(incomingData){
        for(i = 0; i < 31; i++)
            monthChart.data[i].value = incomingData.values[i];
        $('#myfirstchart').empty();
        new Morris.Bar(monthChart); 

        $('#gauge').empty();
            var g = new JustGage({
            id: "gauge",
            value: incomingData.percentage,
            min: 0,
            max: 100,
            title: "% of Building Energy",
            gaugeWidthScale: 1.2,
            titleFontFamily: "Georgia",
            valueFontFamily: "Georgia"
        });

        document.getElementById("enAnalogy").innerHTML = "You could power " + incomingData.energyAnalogyValue + " lightbulbs for a day with the energy produced by these solar panels in a month";

        document.getElementById("cost").innerHTML = "$" + incomingData.moneySaved + " of energy was produced in the last month";
     }

     function drawYearChart(incomingData){
        for(i = 0; i < 12; i++)
            yearChart.data[i].value = incomingData.values[i];
        $('#myfirstchart').empty();
        new Morris.Bar(yearChart); 

        $('#gauge').empty();
            var g = new JustGage({
            id: "gauge",
            value: incomingData.percentage,
            min: 0,
            max: 100,
            title: "% of Building Energy",
            gaugeWidthScale: 1.2,
            titleFontFamily: "Georgia",
            valueFontFamily: "Georgia"
        });

        document.getElementById("enAnalogy").innerHTML = "You could power " + incomingData.energyAnalogyValue + " lightbulbs for a day with the energy produced by these solar panels in a year";

        document.getElementById("cost").innerHTML = "$" + incomingData.moneySaved + " of energy was produced in the last year";
     }


const CURRENT_LOCATION = document.getElementsByClassName('weather-content__overview')[0];
const CURRENT_TEMP = document.getElementsByClassName('weather-content__temp')[0];
const FORECAST = document.getElementsByClassName('component__forecast-box')[0];
const URL = "https://api.openweathermap.org/data/2.5/forecast/daily?q=Madison&cnt=7&units=imperial&APPID=e43f64ee98be9268f7a7f49e34aecfdf";

// Use Fetch API to GET data from OpenWeather API
// return json
function getWeatherData() {
  let headers = new Headers();

  return fetch(URL, {
    method: 'GET',
    headers: headers
  }).then(data => data.json());
}

// TUTORIAL READERS:
// yeah, using an external resource for the icons and applying them here using a switch block
function applyIcon(icon) {
  let selectedIcon;
  switch (icon) {
    case '01d':
      selectedIcon = "wi-day-sunny"
      break;
    case '01n':
      selectedIcon = "wi-night-clear"
      break;
    case '02d':
    case '02n':
      selectedIcon = "wi-cloudy"
      break;
    case '03d':
    case '03n':
    case '04d':
    case '04n':
      selectedIcon = "wi-night-cloudy"
      break;
    case '09d':
    case '09n':
      selectedIcon = "wi-showers"
      break;
    case '10d':
    case '10n':
      selectedIcon = "wi-rain"
      break;
    case '11d':
    case '11n':
      selectedIcon = "wi-thunderstorm"
      break;
    case '13d':
    case '13n':
      selectedIcon = "wi-snow"
      break;
    case '50d':
    case '50n':
      selectedIcon = "wi-fog"
      break;
    default:
      selectedIcon = "wi-meteor"
  }
  return selectedIcon;
}

// Use returned json from promise to render daily forecast
renderData = (location, forecast) => {
  // render city, current weather description and temp
  const currentWeather = forecast[0].weather[0];
  const widgetHeader = `<h1>${location.name}</h1><small>${currentWeather.description}</small>`;
  CURRENT_TEMP.innerHTML = `<i class="wi ${applyIcon(currentWeather.icon)}"></i> ${Math.round(forecast[0].temp.day)} <i class="wi wi-degrees"></i>`;
  CURRENT_LOCATION.innerHTML = widgetHeader;

  // render each daily forecast
  forecast.forEach(day => {
    let date = new Date(day.dt * 1000);
    let days = ['Sun', 'Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat'];
    let name = days[date.getDay()];
    let dayBlock = document.createElement("div");
    dayBlock.className = 'forecast__item';
    dayBlock.innerHTML = `<div class="forecast-item__heading">${name}</div>
      <div class="forecast-item__info"><i class="wi ${applyIcon(day.weather[0].icon)}"></i> <span class="degrees">${Math.round(day.temp.day)}<i class="wi wi-degrees"></i></span></div>`;
    FORECAST.appendChild(dayBlock);
  });
}

// run/render the widget data
getWeatherData().then(weatherData => {
  let city = weatherData.city;
  let dailyForecast = weatherData.list;

  renderData(city, dailyForecast);
});






</script>


    </body>

</html>